---
- name: add tower project
  tower_project:
    name: "Ansible official demo project"
    description: "prescriptive demos from Red Hat Management Buisness Unit"
    organization: "Default"
    scm_type: git
    scm_url: https://github.com/ansible/product-demos
    tower_username: "{{my_tower_username}}"
    tower_password: "{{my_tower_password}}"
    tower_host: "{{my_tower_host}}"
    validate_certs: no

- name: add deploy application job template
  tower_job_template:
    name: "{{demos[demo].name}}"
    job_type: "{{demos[demo].job_type}}"
    inventory: "{{demos[demo].inventory}}"
    project: "{{demos[demo].project}}"
    playbook: "{{demos[demo].playbook}}"
    credential: "{{demos[demo].credential}}"
    survey_enabled: "{{demos[demo].survey_enabled}}"
    survey_spec: "{% if demos[demo].survey_enabled == no %}{{empty_survey}}{% endif %}"
    tower_username: "{{my_tower_username}}"
    tower_password: "{{my_tower_password}}"
    tower_host: "{{my_tower_host}}"
    validate_certs: no
