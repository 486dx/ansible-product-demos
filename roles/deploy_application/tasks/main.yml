---
- name: add tower project
  tower_project:
    name: "Ansible official demo project"
    description: "prescriptive demos from Red Hat Management Buisness Unit"
    organization: "Default"
    scm_type: git
    scm_url: https://github.com/ansible/product-demos
    tower_username: "{{my_tower_username}}"
    tower_password: "{{my_tower_password}}"
    tower_host: "{{my_tower_host}}"
    validate_certs: no

- name: add deploy application job template
  tower_job_template:
    name: "Deploy Application (survey)"
    job_type: "run"
    inventory: "Workshop Inventory"
    project: "Ansible official demo project"
    playbook: "roles/deploy_application/tasks/deploy_application.yml"
    credential: "Demo Credential"
    tower_username: "{{my_tower_username}}"
    tower_password: "{{my_tower_password}}"
    tower_host: "{{my_tower_host}}"
    validate_certs: no
    # survey_enabled: yes
    # survey_spec: "{{ lookup('file', 'my_survey.json') }}"
